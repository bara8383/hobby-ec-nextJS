# 40_functional_requirements

## 1. 購入者向け機能

### 1.1 会員登録・ログイン
- メールアドレス、パスワード、利用規約同意で登録できる
- メール認証が完了するまで利用を制限する
- ログイン/ログアウトができる
- パスワード再設定ができる（再設定手続き有効期限1時間）
- メールアドレス変更ができる（変更後はメール認証完了まで無効）
- 退会ができる（退会後はログイン不可・注文履歴閲覧不可・DL不可）

### 1.2 商品閲覧
- 商品一覧を閲覧できる
- 商品詳細を閲覧できる（商品名、短文説明、価格、注意事項等）

### 1.3 カート
- 商品をカートに追加できる
- カート内で数量変更できる
- カートから削除できる
- カート内合計金額を確認できる

### 1.4 購入手続き・注文
- カート内容から購入手続きを開始できる
- 注文状態に応じた表示ができる（支払い待ち等）
- 支払い待ちの場合、支払い期限を期限日時で表示する
- 支払い待ち期限を超過した場合、注文がキャンセルとなることをユーザーに示す

### 1.5 注文履歴（取引情報）
- 注文一覧を表示できる（購入日、合計金額、状態、購入数（注文合計点数）等）
- 注文詳細を表示できる（商品明細、数量、合計金額、状態等）

### 1.6 DLライブラリ（購入済みコンテンツ）
- 購入成立の商品のみ表示する
- 表示項目：商品名、短文説明、DLボタン（取引金額・購入日等は原則表示しない）
- 短文説明は上限120文字（超過時は自動切り詰め：暫定）
- DL操作により提供手続きが初回実行された時点でDL済み判定となる

### 1.7 通知
- メール通知／サイト内通知を受け取れる
- 通知チャネル設定を変更できる（最低1つONの制約あり）
- サイト内通知一覧を閲覧できる（既読/未読）
- 通知を任意に削除できる
- 既読通知は90日で自動削除される
- 一覧はページング、1ページ50件

### 1.8 通報
- 出品に対して通報できる
- 通報理由（権利侵害/禁止商材/詐欺・虚偽説明）を選択できる
- 任意の詳細説明を入力できる
- 通報の受付完了通知を受け取れる
- 最終結果と簡易理由の通知を受け取れる

---

## 2. 出品者向け機能

### 2.1 出品者アカウント
- 出品者は会員として登録・ログインできる（購入者と同一の会員基盤でもよい）
- 退会等の挙動は会員要件に準じる

### 2.2 商品管理
- 商品を登録できる（必須：商品名、短文説明、価格、提供ファイル1つ以上、販売状態、注意事項）
- 商品を編集できる
- 商品を販売停止にできる

### 2.3 初回出品審査
- 初回の販売公開は審査対象となる
- 審査結果（承認/差し戻し/却下）を確認できる
- 差し戻しの場合、修正して再申請できる
- 審査結果の通知（メール＋サイト内）を受け取れる

### 2.4 売上・精算
- 売上・精算の一覧を確認できる
- 精算明細を注文単位で閲覧できる（販売額、手数料額、受取額、精算ステータス等）
- 精算スケジュール（週次、日曜締め水曜払い）を確認できる

---

## 3. 運営者向け機能

### 3.1 出品者・商品監督
- 初回出品審査を実施できる（承認/差し戻し/却下）
- 差し戻し/却下理由を付与できる（簡易で可）
- 商品を販売停止にできる（必要に応じて運営停止）

### 3.2 通報対応
- 通報一覧を確認できる
- 通報に対して措置を実行できる
  - クローズ／差し戻し／一時停止／削除／出品者停止
- 通報者へ最終結果＋簡易理由を通知できる

### 3.3 注文管理・返金
- 注文の状態を確認できる
- 返金可否を判断できる（未DLのみ可、DL済み不可、例外は個別対応）
- 返金を実行できる
- 返金完了通知を購入者へ送れる

### 3.4 手数料・精算管理
- 手数料率（暫定10%）を設定・変更できる
- 手数料率変更が新規注文にのみ適用されることを担保できる
- 週次精算（締め/支払）を運用できる
- 出品者向け精算明細を生成/閲覧できる
