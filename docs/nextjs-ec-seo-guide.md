# Next.jsでSEOに強いECサイトを効率よく作る実践ガイド

## 1. 最初に押さえる設計方針（重要）

ECサイトのSEOは、**技術実装**だけでなく、**情報設計（カテゴリ構造・商品データ・内部リンク）**で成果が大きく変わります。Next.jsでは次の方針が効率的です。

- 商品詳細・カテゴリ一覧・ブランド一覧は原則SSR/SSGで初期HTMLに主要情報を含める。
- URLは意味のあるスラッグにする（`/category/running-shoes`、`/product/nike-pegasus-41` など）。
- metadata APIでtitle/description/canonical/OGPをページ単位で自動生成する。
- JSON-LD（Product/BreadcrumbList/ItemList）をテンプレート化して全ページで一貫運用する。
- まず「売上に近いページ（カテゴリ・商品詳細）」から優先的に最適化する。

## 2. 推奨技術スタック（Next.js App Router想定）

- Next.js（App Router）
- TypeScript
- Headless CMS（商品説明、特集記事、FAQ）
- Commerce API（在庫・価格・SKU）
- 画像最適化: `next/image`
- 計測: Google Search Console + GA4

### 実装優先順位

1. URL設計
2. metadataとcanonical
3. 構造化データ（JSON-LD）
4. 内部リンクとパンくず
5. Core Web Vitals改善
6. サイトマップ/robots最適化

## 3. App Routerで必須のSEO実装

## 3.1 metadata APIを標準化

- すべてのルートで`generateMetadata`を使い、title/descriptionを動的生成。
- 重複防止のため、canonical URLを必ず設定。
- OGP/Twitterカードの画像をページごとに出し分け。

例（考え方）:

- 商品詳細: `商品名 | ブランド名 公式通販`
- カテゴリ: `ランニングシューズ一覧 | ブランド名 公式通販`
- 記事: `初心者向けランニングシューズの選び方 | ブランド名`

## 3.2 sitemap/robotsを自動生成

- 商品・カテゴリ・記事の公開URLを統合して`sitemap.xml`を生成。
- 在庫切れでも有用ページなら即noindexにせず、代替商品リンクを出して評価維持。
- `robots.txt`で検索不要なページ（カート、マイページ、検索結果パラメータ）を制御。

## 3.3 構造化データをテンプレート化

ECでは以下が特に重要です。

- `Product`（価格、在庫、レビュー、ブランド、SKU）
- `BreadcrumbList`（カテゴリ階層）
- `ItemList`（カテゴリ一覧）
- `FAQPage`（商品FAQがある場合）

ポイント:

- `offers.price`と画面表示価格の不一致をなくす。
- 在庫ステータスをリアルタイムに近い形で更新。
- レビューの`aggregateRating`は実データと一致させる。

## 4. EC特有のSEOで失敗しやすい点

## 4.1 バリエーションURLの重複

色・サイズ違いでURLを増やしすぎると重複が発生しやすいです。

- 基本は代表URLを1つ持ち、バリエーションは同一ページ内で切替。
- URLを分ける場合はcanonicalで正規化。

## 4.2 フィルタ/ソートURLのインデックス汚染

- `?color=black&size=27`のような組み合わせは原則noindex/canonical制御。
- SEO対象にしたい組み合わせ（例: 黒 ランニングシューズ）は静的な専用ランディングページを作る。

## 4.3 在庫切れ・販売終了ページの扱い

- 一時欠品: ページは維持し、再入荷通知や類似商品を提示。
- 恒久終了: 関連カテゴリまたは後継商品へ301。
- 代替不可: 410も選択肢（ただし運用ポリシーを統一）。

## 5. パフォーマンス（Core Web Vitals）最適化

SEO効率を上げるために、実装と同時に速度対策を行います。

- LCP対象のヒーロー画像は適切サイズ + `priority`。
- 商品一覧の画像は`next/image`で遅延読み込み。
- サードパーティタグを最小化（A/Bテスト、チャット、ヒートマップの積み上げに注意）。
- フォントはサブセット化、CLSを避ける。
- キャッシュ戦略（ISR・CDN・revalidate）をページ種類ごとに分ける。

## 6. コンテンツ戦略（売上に直結）

ECでは「商品ページだけ」では競争が厳しいため、次をセットで作ると強いです。

- 比較記事（例: 初心者向け5モデル比較）
- 悩み解決記事（膝痛向け、雨の日向け、用途別）
- サイズ選びガイド
- 配送・返品・保証の明確化（E-E-A-T補強）
- FAQ整備（検索意図の取りこぼし防止）

内部リンク設計:

- 記事 -> カテゴリ -> 商品
- 商品 -> 関連記事（選び方/メンテナンス）
- カテゴリ上部に買い方ガイド導線

## 7. 計測と改善サイクル（最短で成果を出す）

- Search Consoleでクエリ×URLを週次確認。
- CTRが低いページはtitle/descriptionをAB的に改善。
- 11〜20位のクエリを優先的に内部リンク・追記で押し上げる。
- 在庫切れ率が高いカテゴリはSEO流入後の離脱率も一緒に見る。

## 8. すぐ使える30日アクションプラン

### Day 1-3

- URLとカテゴリ構造を確定
- metadataテンプレート作成
- canonicalルール策定

### Day 4-10

- 商品詳細/カテゴリにJSON-LD導入
- パンくずと内部リンク実装
- sitemap/robots生成

### Day 11-20

- Core Web Vitals改善（画像・スクリプト・フォント）
- 在庫切れページ運用ルール適用

### Day 21-30

- 比較記事・選び方記事を公開
- Search Consoleデータでtitle/description改善
- 重点カテゴリの追記とリンク強化

## 9. 実務向けチェックリスト

- [ ] 商品詳細に固有title/descriptionがある
- [ ] canonicalが自己参照または意図したURLを指している
- [ ] Product JSON-LDの価格・在庫・レビューが実データと一致
- [ ] パンくずがHTML/構造化データの両方で実装済み
- [ ] フィルタURLのindex制御ができている
- [ ] 在庫切れページの運用（維持/301/410）が定義済み
- [ ] LCP/INP/CLSを計測し、ボトルネックを把握している
- [ ] Search Consoleで週次モニタリングしている

---

このガイドの方針で進めると、Next.jsの実装効率を維持しながら、ECに必要なSEOの基礎と運用改善を同時に回せます。
